<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ZCP</title>
<style>
*{box-sizing:border-box;font-family:Arial}
body{margin:0;background:#0f1115;color:#fff}
header{
  display:flex;justify-content:space-between;align-items:center;
  padding:12px 16px;background:#151821;
}
#logo{font-size:22px;font-weight:bold}
#addBtn{font-size:26px;cursor:pointer}

#search{width:100%;padding:10px;margin:10px;border-radius:6px;border:none}

#form{display:none;padding:10px}
#form input{width:100%;padding:10px;margin:6px 0;border-radius:6px;border:none}

#saveBtn{width:100%;padding:10px;border:none;border-radius:6px;background:#3b82f6;color:#fff}

#list{padding:10px}
.card{
  background:#1b1f2a;margin-bottom:8px;padding:10px;border-radius:8px;
  display:flex;justify-content:space-between;align-items:center;
}
.card span{cursor:pointer}
.del{color:#f87171;font-weight:bold;cursor:pointer}

/* PIN */
#lock{
  position:fixed;inset:0;background:#0f1115;
  display:flex;flex-direction:column;justify-content:center;align-items:center;
}
#dots{display:flex;gap:10px;margin-bottom:20px}
.dot{width:12px;height:12px;border:2px solid #555;border-radius:50%}
.dot.fill{background:#fff;border-color:#fff}

#pad{display:grid;grid-template-columns:repeat(3,70px);gap:12px}
.key{
  width:70px;height:70px;border-radius:50%;
  background:#1b1f2a;display:flex;align-items:center;justify-content:center;
  font-size:20px;cursor:pointer;user-select:none;
}
.key.zero{grid-column:2}
#error{color:#f87171;margin-top:10px;height:20px}
</style>
</head>
<body>

<!-- KİLİT EKRANI -->
<div id="lock">
  <div id="dots">
    <div class="dot"></div><div class="dot"></div><div class="dot"></div>
    <div class="dot"></div><div class="dot"></div><div class="dot"></div>
  </div>
  <div id="pad"></div>
  <div id="error"></div>
</div>

<header>
  <div id="logo">ZCP</div>
  <div id="addBtn">+</div>
</header>

<input id="search" placeholder="ARA..." />

<div id="form">
  <input id="label" placeholder="ETİKET">
  <input id="user" placeholder="KULLANICI ADI">
  <input id="pass" placeholder="PAROLA">
  <button id="saveBtn">Kaydet</button>
</div>

<div id="list"></div>

<script>
// ---------- PIN ----------
const सहीPIN = "956251";
let entered = "";
const dots = document.querySelectorAll(".dot");
const lock = document.getElementById("lock");
const pad = document.getElementById("pad");
const error = document.getElementById("error");

// Tuş dizilimi: 789 / 456 / 123 / 0
["7","8","9","4","5","6","1","2","3","0"].forEach(n=>{
  const b=document.createElement("div");
  b.className="key"+(n==="0"?" zero":"");
  b.textContent=n;
  b.addEventListener("pointerdown",()=>press(n)); // TEK OLAY = çift yazma yok
  pad.appendChild(b);
});

function press(n){
  if(entered.length>=6) return;
  entered+=n;
  dots[entered.length-1].classList.add("fill");

  if(entered.length===6){
    if(entered===सहीPIN){
      lock.style.display="none";
    }else{
      error.textContent="Şifre yanlış";
      setTimeout(resetPin,800);
    }
  }
}
function resetPin(){
  entered="";
  dots.forEach(d=>d.classList.remove("fill"));
  error.textContent="";
}

// ---------- UYGULAMA ----------
const addBtn=document.getElementById("addBtn");
const form=document.getElementById("form");
const saveBtn=document.getElementById("saveBtn");
const list=document.getElementById("list");
const search=document.getElementById("search");

addBtn.addEventListener("click",()=>{
  form.style.display = form.style.display==="block"?"none":"block";
});

// büyük harf otomatik
["label","search"].forEach(id=>{
  document.getElementById(id).addEventListener("input",e=>{
    e.target.value=e.target.value.toUpperCase();
  });
});

let data = JSON.parse(localStorage.getItem("zcp-data")||"[]");
render();

saveBtn.addEventListener("click",()=>{
  const label=document.getElementById("label").value.trim().toUpperCase();
  const user=document.getElementById("user").value.trim();
  const pass=document.getElementById("pass").value.trim();
  if(!label||!user||!pass) return;

  data.push({label,user,pass,open:false});
  localStorage.setItem("zcp-data",JSON.stringify(data));
  form.style.display="none";
  document.getElementById("label").value="";
  document.getElementById("user").value="";
  document.getElementById("pass").value="";
  render();
});

function render(){
  const q=search.value.toUpperCase();
  list.innerHTML="";
  data.filter(d=>d.label.includes(q)).forEach((d,i)=>{
    const c=document.createElement("div");
    c.className="card";

    const left=document.createElement("span");
    left.textContent=d.open?`${d.label} → ${d.user} / ${d.pass}`:d.label;
    left.addEventListener("click",()=>{
      d.open=!d.open;
      localStorage.setItem("zcp-data",JSON.stringify(data));
      render();
    });

    const del=document.createElement("div");
    del.className="del";
    del.textContent="X";
    del.addEventListener("click",()=>{
      data.splice(i,1);
      localStorage.setItem("zcp-data",JSON.stringify(data));
      render();
    });

    c.appendChild(left);
    c.appendChild(del);
    list.appendChild(c);
  });
}
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ZCP</title>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:#0f1115;
  color:#eee;
}

header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:12px 16px;
  border-bottom:1px solid #222;
}

h1{
  margin:0;
  font-size:20px;
}

#addBtn{
  background:#2563eb;
  border:none;
  color:#fff;
  border-radius:8px;
  padding:8px 12px;
  font-size:18px;
  cursor:pointer;
}

#form{
  display:none;
  padding:12px 16px;
  border-bottom:1px solid #222;
}

input{
  width:100%;
  margin:6px 0;
  padding:10px;
  border-radius:8px;
  border:1px solid #333;
  background:#1a1d24;
  color:#fff;
}

#saveBtn{
  width:100%;
  padding:10px;
  border:none;
  border-radius:8px;
  background:#22c55e;
  color:#062b12;
  font-weight:bold;
  cursor:pointer;
}

#list{
  padding:12px;
}

.card{
  background:#151922;
  border:1px solid #222;
  border-radius:12px;
  padding:10px;
  margin-bottom:8px;
  cursor:grab;
}

.row{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.label{
  font-weight:bold;
  letter-spacing:1px;
}

.details{
  display:none;
  margin-top:6px;
  color:#cbd5ff;
  font-size:14px;
}

.del{
  background:#ff3b3b;
  border:none;
  color:#fff;
  border-radius:6px;
  padding:4px 8px;
  cursor:pointer;
}
</style>
</head>

<body>

<header>
  <h1>ZCP</h1>
  <button id="addBtn">+</button>
</header>

<div id="form">
  <input id="etiket" placeholder="ETİKET">
  <input id="user" placeholder="KULLANICI ADI">
  <input id="pass" placeholder="PAROLA">
  <button id="saveBtn">Kaydet</button>
</div>

<div id="list"></div>

<script>
const addBtn = document.getElementById("addBtn");
const form   = document.getElementById("form");
const saveBtn= document.getElementById("saveBtn");
const list   = document.getElementById("list");

let items = JSON.parse(localStorage.getItem("zcp_items") || "[]");

addBtn.onclick = () => {
  form.style.display = form.style.display === "none" ? "block" : "none";
};

function saveLocal(){
  localStorage.setItem("zcp_items", JSON.stringify(items));
}

function render(){
  list.innerHTML = "";

  items.forEach((it,i)=>{
    const c = document.createElement("div");
    c.className = "card";
    c.draggable = true;
    c.dataset.i = i;

    c.innerHTML = `
      <div class="row">
        <div class="label">${it.label}</div>
        <button class="del">X</button>
      </div>
      <div class="details">
        <div>Kullanıcı: ${it.user}</div>
        <div>Şifre: ${it.pass}</div>
      </div>
    `;

    // kart tıkla → detay aç/kapat
    c.onclick = (e)=>{
      if(e.target.classList.contains("del")) return;
      const d = c.querySelector(".details");
      d.style.display = d.style.display === "none" ? "block" : "none";
    };

    // sil
    c.querySelector(".del").onclick = ()=>{
      items.splice(i,1);
      saveLocal();
      render();
    };

    // sürükle başla
    c.addEventListener("dragstart", e=>{
      e.dataTransfer.setData("text/plain", i);
    });

    // üstüne gelince izin ver
    c.addEventListener("dragover", e=> e.preventDefault());

    // bırakınca yer değiştir
    c.addEventListener("drop", e=>{
      e.preventDefault();
      const from = +e.dataTransfer.getData("text/plain");
      const to   = i;
      if(from === to) return;

      const moved = items.splice(from,1)[0];
      items.splice(to,0,moved);
      saveLocal();
      render();
    });

    list.appendChild(c);
  });
}

// kaydet butonu
saveBtn.onclick = ()=>{
  const label = document.getElementById("etiket").value.toUpperCase().trim();
  const user  = document.getElementById("user").value.trim();
  const pass  = document.getElementById("pass").value.trim();

  if(!label || !user || !pass){
    alert("Hepsini doldur");
    return;
  }

  // yeni kayıt EN ÜSTE
  items.unshift({label,user,pass});
  saveLocal();
  render();

  document.getElementById("etiket").value="";
  document.getElementById("user").value="";
  document.getElementById("pass").value="";
  form.style.display="none";
};

render();
</script>

</body>
</html>
